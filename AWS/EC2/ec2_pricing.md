💻 [AWS] EC2 Instance Pricing
=============

* 별도의 구매 옵션이 없는 경우 인스턴스를 생성한 시점부터 비용이 청구됨.(인스턴스 생성 후 1초만 사용해도 1시간 요금이 적용된다.)
* 인스턴스의 여러 구매 옵션을 알아보고 EC2 인스턴스 비용을 조금이나마 절약하는 방법에 대해 요약.

# 온디맨드
* 인스턴스를 생성하는 순간부터 초 단위로 비용을 지불하는 방식. 별도의 구매 옵션이 없다면 온디맨드로 적용된다.
  * 사용한 만큼만 비용을 지불하면 되기 때문에 종료 기간이 불확실한 경우에 사용하기 적합

# 예약 인스턴스(Reserved Instance)
* 특정 기간동안 약정을 맺고 비용을 지불하는 예약 요금제.
* 선 결제시 온디맨드 인스턴스보다 저렴하게 사용할 수 있지만 계약 기간 중 비용 환불이 되지 않기 때문에 장기간 사용해야할 인스턴스에 적합

## 인스턴스의 RI 구매전략
* (예시) 사용중인 인스턴스 t3.small에 RI를 적용하는 방법
  * t3.small 하나 구매
  * t3.nano 4개 구매
    * 인스턴스 크기에 따라 구매한 RI가 탄력적으로 적용된다!
    * t3.nano (1) -> t3.micro (2) -> t3.small (4)

## RI 적용 확인하기
* 운영중인 인스턴스의 수가 많아질수록 RI의 수량 관리가 번거로워지기에 지속적으로 확인해줘야할 필요가 있다. 어떻게 확인할까?
  * Billing & Cost Explorer 서비스 활용
  * 스크립트를 작성하여 주기적으로 모니터링

# Savings Plans
* 특정 기간(1년 or 3년)동안 사용량에 대한 비용(시간당 USD)을 고정함으로써 비용 절감 가능

# 스팟 인스턴스
* 사용자가 인스턴스 사용에 대해 가격을 지정하고 지정한 가격이 현재 시세보다 낮아지면 인스턴스를 중지 혹은 종료하는 방식.
  * 지정한 가격(Max Spot Price) > 현재 시세(Current Spot Price) : 인스턴스 정상 가동
  * 지정한 가격(Max Spot Price) < 현재 시세(Current Spot Price) : **2분 내** 인스턴스 중지 or 종료
    * 인스턴스를 중지할지, 종료할지는 선택
* 스팟 인스턴스는 AZ 단위로 적용됨. 

## 스팟 인스턴스의 동작 이해하기
* 스팟 용량 풀(Pool)
* 스팟 비용(Price)
* 스팟 요청(Request) : 스팟 인스턴스 적용을 위한 사용자의 요청
  * 인스턴스의 사양(AMI, 인스턴스 유형 등)
  * 인스턴스의 수
  * 사용자 정의 가격
  * 요청 유형
    * 일회성 요청
    * 지속적 요청

스팟 인스턴스는 언제든 회수될 수 있기에 장기적으로 운영되어야 하는 인스턴스에는 적절하지 못하지만 배치 작업같이 특정 시간대에만 필요한 경우에 고려해볼 수 있겠다.