Storage
===========================

# 스토리지(Storage)
* 데이터를 저장할 수 있는 장소
* 직접 서버에 연결이 가능
* 대용량의 데이터를 저장하기 위해 별도의 네트워크 스토리지 구축 가능


# Storage Type

## File Storage
* 일반적으로 NAS 혹은 DAS에서 사용
* 파일 기반 스토리지
* 파일과 디렉토리가 계층적 구조를 이루고 있음
* 메타데이터를 통해 해당 파일을 찾음
* 폴더에 파일을 넣고 저장
* 다수의 사용자가 동시에 스토리지의 데이터 공유 가능
* 파일이 디렉토리에 저장되고 해당 파일을 찾기 위해서는 경로를 알고 있어야 함(경로가 복잡한 경우 찾기 어려울 수 있음)
* 저장할 파일의 수가 적을 때는 저장하고 찾기가 쉽지만 파일의 수가 많아질 수록 찾기 어려워짐   
<img width="601" alt="스크린샷 2021-05-13 오전 2 19 58" src="https://user-images.githubusercontent.com/57285121/118017550-b8fab500-b391-11eb-980b-543b9299e60b.png">   

* 장점   
> * 파일의 수가 적을 경우에는 파일을 저장하고 찾기가 쉽다   
> * 다수의 사용자가 동시에 스토리지의 데이터를 공유할 수 있음   
* 단점   
> * 저장되는 파일의 수가 많아질 경우에는 파일을 찾기 어려워짐   

## Block Storage
* 일반적으로 SAN에서 사용
* 균등한 크기로 정의된 블록에 데이터를 분할해서 저장하는 스토리지
* 블록이라는 특정 공간 위치에 데이터를 저장하고 접근하는 방식(C드라이브, D드라이브같은 개념)
* 블록은 각각 독립적으로 주소를 가지고 존재하며 분할(파티션)이 가능
* 보통 데이터센터의 서버에 가깝게 위치(서버에서 접근이 가능한 볼륨으로 스토리지를 구성)
* 서버가 데이터 관리의 주체가 되기 때문에 서버가 고장나면 이용할 수 없고 사용자와 스토리지가 1:1로 데이터를 공유해야함
* 데이터를 저장하고 읽기 위해서는(데이터 입, 출력) 컨트롤러가 필요함(여기저기 분할된 데이터 블록들을 다시 합침)
* 파일 스토리지와는 다르게 경로에 의존하지 않음   
<img width="641" alt="스크린샷 2021-05-13 오전 2 19 25" src="https://user-images.githubusercontent.com/57285121/118017487-a54f4e80-b391-11eb-8ecd-6eb28ab22a3d.png">   

* 장점   
> * 데이터 저장 시 블록들을 굳이 인접하게 저장할 필요가 없기 때문에 저장함에 있어서 효율적으로 저장이 가능   
> * 데이터를 찾을 때에도 데이터의 독립적인 주소를 통해 빠른 검색이 가능   
* 단점   
> * 구성하는데 있어서 복잡하고 비용적으로 많이 듦   

## Object Storage
* 오브젝트(객체) 기반 스토리지
* 별도의 저장소에 논리적인 객체 단위로 데이터를 저장
* 계층적 구조가 아닌 flat한 구조로 저장
* 동시에 많은 사용자가 스토리지에 접근이 가능
* 데이터 저장 시 저장소(풀)에 데이터+메타데이터+키 형태로 저장   
<img width="445" alt="스크린샷 2021-05-13 오후 5 11 43" src="https://user-images.githubusercontent.com/57285121/118097992-54ca0680-b40e-11eb-822a-36ee7df5733f.png">   

* 고유 식별자(메타데이터 혹은 키)로 검색
* 비정형 데이터 저장에 적합
* REST API(HTTP)을 사용하기 때문에 GET이나 POST요청을 통해 데이터를 가져올 수 있음
* API를 사용하여 애플리케이션 수준에서 접근
* 장점   
> * 데이터 검색 속도가 빠름   
> * 유연한 확장성   
> * 저렴한 비용으로 많은 양의 데이터를 관리하기에 적합   
* 단점   
> * 오브젝트 수정이 불가능함   
<img width="984" alt="스크린샷 2021-05-13 오후 6 42 27" src="https://user-images.githubusercontent.com/57285121/118108446-f9524580-b41a-11eb-8a90-ab580c483604.png">   

# Storage Architecture 

## Local Storage 
* 서버 본체 내 장착된 내장 디스크.
* 외부 스토리지를 사용하지 않기 때문에 물리적 공간을 절약할 수 있음
* 설치할 수 있는 디스크의 개수와 확장성에 한계가 있음
* 별도의 백업을 하지 않으면 서버 고장 시 복구가 어려움
 
## External Storage : DAS
* Direct Attached Storage   
<img width="1012" alt="스크린샷 2021-05-13 오후 11 43 26" src="https://user-images.githubusercontent.com/57285121/118142106-07b55700-b445-11eb-9b3d-8108a0e38f34.png">   

* 하드디스크를 여러 개 장착한 스토리지
* 유선으로 외장하드처럼 사용 가능 
* 로컬 스토리지와 유사한 물리적 구조
* 서버에 스토리지를 1:1로 직접 연결해서 사용하는 방식
* 각 서버가 연결된 스토리지의 파일 시스템을 관리
* File Storage   
<img width="348" alt="스크린샷 2021-05-13 오후 6 45 24" src="https://user-images.githubusercontent.com/57285121/118108798-62d25400-b41b-11eb-8f94-5777160a67cb.png">   

* 장점   
> * 저장장치를 외부에 연결함으로 저장공간을 더 쉽게 확장할 수 있음      
> * 설치 과정이 어렵지 않음
* 단점   
> * 서버에 종속되어 있기 때문에 특정 데이터에 접근하기 위해서는 서버를 거쳐야 하는데 서버 고장 시 해당 서버에 연결된 스토리지를 이용할 수 없게 됨   
> * 여러 사용자들 간 파일 공유가 가능은 하나 수의 제한이 있음

## External Storage : NAS
* Network Attached Storage   
<img width="1004" alt="스크린샷 2021-05-13 오후 11 44 44" src="https://user-images.githubusercontent.com/57285121/118142297-33d0d800-b445-11eb-89b6-9ee394a0474e.png">   

* PC와 직접 연결하는 것이 아닌 네트워크(LAN)를 통해 스토리지와 연결
* 네트워크를 통해 스토리지에 접속이 가능
* DAS의 단점이였던 사용자들 간 파일 공유에 제한이 있다는 점을 해결(윈도우의 공유 폴더처럼)
* 네트워크의 대역폭이 낮은 경우에는 전송 속도가 떨어짐
* 다양한 OS 간 **파일 전송 및 공유**를 위한 여러 프로토콜 지원(**파일서버**)   
> * FTP(File Transfer Protocol) : 파일 업로드 / 다운로드 만을 위한 프로토콜   
> * 윈도우와 윈도우 간 : CIFS(Common Internet File System)   
> * 리눅스와 리눅스 간 : NFS(Network File System)   
> * 리눅스와 윈도우 간 : SMB(Server Message Block)/CIFS
* File Storage   
<img width="373" alt="스크린샷 2021-05-14 오전 12 03 41" src="https://user-images.githubusercontent.com/57285121/118144819-dab67380-b447-11eb-986c-a3ef5aa855e0.png">   

* 장점   
> * 다수의 사용자가 네트워크를 통해 접근하여 파일 공유가 가능함   
> * 지원하는 여러 프로토콜을 이용해 서로 다른 OS 간에도 파일 공유가 가능함
* 단점   
> * 사용자가 많아지면 네트워크 속도가 느려질 수 있음   
> * 네트워크를 기반으로 파일을 전송 및 공유를 하다보니 DAS보다 속도가 느림

## External Storage : SAN
* Storage Area Network
* 스토리지만을 위한 고속 네트워크를 새로 구축
* 구성 시 스위치를 이더넷 스위치가 아닌 Fiber Channel 스위치(SAN 스위치)를 사용하여 구성
* 서버의 스토리지 확장 시 서버 가동을 멈추지 않고 확장이 가능(**고가용성**)
* Block Storage   
<img width="393" alt="스크린샷 2021-05-14 오전 1 43 04" src="https://user-images.githubusercontent.com/57285121/118157620-bc577480-b455-11eb-8d46-b91c45fa9243.png">   

* 장점   
> * NAS 보다 빠른 속도의 데이터 저장 및 공유   
> * 서버를 중단시키지 않고 확장이 가능하기 때문에 NAS보다 고가용성      
* 단점 
> * 가격이 비쌈
