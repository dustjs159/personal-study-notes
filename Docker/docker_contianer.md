ğŸ’» [Docker] Container
==================
## Container
* ì»¨í…Œì´ë„ˆëŠ” í˜¸ìŠ¤íŠ¸ ë‚´ì—ì„œ Docker Enigne ìœ„ì—ì„œ ì‘ë™í•˜ëŠ” ê²©ë¦¬ëœ appì˜ ì‹¤í–‰ ë‹¨ìœ„
    * DockerëŠ” ì´ëŸ¬í•œ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ëŠ” ë„êµ¬.
* ì»¨í…Œì´ë„ˆëŠ” **ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.**

<img width="1145" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-02-05 á„‹á…©á„’á…® 2 46 42" src="https://user-images.githubusercontent.com/57285121/216803895-561842ea-3267-41b5-953d-17ccdc873315.png">


## ë¹Œë“œí•œ ì´ë¯¸ì§€ë¡œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰í•˜ê¸°

* ì»¨í…Œì´ë„ˆ ì‹œì‘(Run)

`docker run --help` ëª…ë ¹ì–´ë¡œ ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 
```
docker run [OPTIONS] IMAGE [COMMAND] [ARG...]
```
ì£¼ìš”í•œ ì˜µì…˜(ìì£¼ ì“°ëŠ” ê²ƒë“¤)
 * `-d` : detached ëª¨ë“œë¡œ ì‹¤í–‰(ë°±ê·¸ë¼ìš´ë“œ)
 * `--name {container name}` : ì»¨í…Œì´ë„ˆ ì´ë¦„ ì§€ì •
 * `-p {host-port}:{container-port}` : ë§¤í•‘í•  í¬íŠ¸ ì§€ì •(publisher)
 * `--restart=always` : ì„œë²„ ì¬ì‹œì‘ í›„ Docker ë°ëª¬ê¹Œì§€ ì •ìƒ ì‘ë™ ë˜ì–´ ìˆì„ ê²½ìš°, ì»¨í…Œì´ë„ˆë„ ìë™ ì¬ì‹œì‘
 * `--rm` : ì»¨í…Œì´ë„ˆê°€ ë¯¸ì‚¬ìš© ìƒíƒœ(`Stop`)ê°€ ë  ê²½ìš° ìë™ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ì‚­ì œë˜ë„ë¡ ì„¤ì •
```
docker run -d --rm --restart=always --name {container name} {image} -p {host-port}:{container-port}
```

## docker run vs start 
* `docker run` ëª…ë ¹ì–´ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë©´ í¬ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰ì´ ëœë‹¤. ê·¸ëŸ°ë° `docker start` ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰ì´ ëœë‹¤. ë‘ ëª…ë ¹ì–´ì˜ default ì‹¤í–‰ ëª¨ë“œê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤.
* `docker run` ì€ defaultê°€ attached ëª¨ë“œ(foreground)ë¡œ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ë©° `docker start` ëŠ” defaultë¡œ detached ëª¨ë“œ(background)ë¡œ ì‹¤í–‰ì´ ëœë‹¤.
* `docker run` ìœ¼ë¡œ backgroundì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ì‹œí‚¤ê³ ì í•œë‹¤ë©´ `-d` ì˜µì…˜(detached)ì„ ì‚¬ìš©í•œë‹¤.
    * `docker run -d ....`
* `docker start` ë¡œ foregroundì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ì‹œí‚¤ê³ ì í•œë‹¤ë©´ `-a` ì˜µì…˜(attached)ì„ ì‚¬ìš©í•œë‹¤.
    * `docker start -a ....`
* ì´ë¯¸ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì§ì ‘ ì—°ê²°í•˜ê³ ì í•œë‹¤ë©´...
    * `docker attach {container}`

## ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ì§„ì…í•˜ê¸° - Interactive ëª¨ë“œ
* `-i` ì˜µì…˜ì„ í†µí•´ ì»¨í…Œì´ë„ˆì˜ ë‚´ë¶€ì— ì§„ì…í•˜ì—¬ ì»¤ë§¨ë“œ ì…ë ¥ì´ ê°€ëŠ¥ (interactive)
    * `STDIN` ìƒíƒœ ìœ ì§€
* `-t` ì˜µì…˜ì„ í†µí•´ ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•  í„°ë¯¸ë„ì„ ë„ì›€ (tty)
* ì¦‰ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ëª…ë ¹ì–´ë¥¼ ì „ë‹¬í•˜ê³ ì í•  ë•Œ `-i` ì˜µì…˜ì„ í†µí•´ ì»¨í…Œì´ë„ˆê°€ STDINìœ¼ë¡œ ëª…ë ¹ì–´ë¥¼ ì…ë ¥ ë°›ì„ ì¤€ë¹„í•˜ê³  `-t` ì˜µì…˜ìœ¼ë¡œ ì…ë ¥ ë°›ì„ í„°ë¯¸ë„ì„ ë„ìš´ë‹¤.
    * í•©ì³ì„œ `-it`ë¡œ ë§ì´ ì‚¬ìš©í•¨
    * ê·¼ë° ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ê³  íŠ¹ì • ê°’ì„ ì…ë ¥ë°›ëŠ” ê²½ìš° í•œë²ˆë§Œ ì…ë ¥ê°’ì„ ë°›ê³  ì»¨í…Œì´ë„ˆê°€ ì¤‘ì§€ëœë‹¤... ê·¸ë¦¬ê³  ë‹¤ì‹œ ë„ìš°ê¸° ìœ„í•´ `docker start` ë¥¼ í•˜ê²Œ ë˜ë©´ default ì‹¤í–‰ ëª¨ë“œ(detached)ë¡œ ì‹¤í–‰ëœë‹¤.(ì•„ë¬´ê²ƒë„ ë³€í™”ê°€ ì—†ì„ ë“¯)
    * ê·¸ë˜ì„œ `-a` ì˜µì…˜ìœ¼ë¡œ attached ëª¨ë“œë¡œ ì‹¤í–‰í•˜ë‹ˆ í•œ ë²ˆì˜ ì…ë ¥ê°’ë§Œì„ ë°›ê³  ë” ì´ìƒ ì…ë ¥ ê°’ì„ ë°›ì§€ ì•ŠëŠ” í˜„ìƒì´ ìˆì—ˆëŠ”ë° ì´ëŠ” `-i` ì˜µì…˜ì´ ì—†ì–´ì„œ(= STDINìœ¼ë¡œ ë°›ì„ ì¤€ë¹„ê°€ ì•ˆë˜ì–´ ìˆì–´ì„œ) í•œ ë²ˆ ë°›ê³  ëë‚œ ê²½ìš°ë‹¤. í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ì…ë ¥ê°’ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.
        * `docker start -i -a {container}`

### ì»¨í…Œì´ë„ˆ ê´€ë ¨ command
```bash
# ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run {image} # ì‹¤í–‰ ëª¨ë“œ : attached (default) 

# ì»¨í…Œì´ë„ˆ ì‹œì‘(íŠ¹ì • ì´ë¯¸ì§€ë¡œ ì‹¤í–‰ë˜ì—ˆë˜ ì»¨í…Œì´ë„ˆì˜ ì´ë¯¸ì§€ì— ëŒ€í•œ ë³€ê²½ì‚¬í•­ì´ ì—†ì„ ë•Œ ì‚¬ìš©)
docker start {container} # ì‹¤í–‰ ëª¨ë“œ : detached (default)

# ì»¨í…Œì´ë„ˆ ì¤‘ì§€
docker stop {container} # SIGTERM

# ë¯¸ì‚¬ìš© ì»¨í…Œì´ë„ˆ ì‚­ì œ
docker container prune

# ì»¨í…Œì´ë„ˆ ì‚­ì œ
docker rm {container} # SIGKILL

# ì»¨í…Œì´ë„ˆ ê°•ì œ ì¢…ë£Œ && ì‚­ì œ
docker rm -f {container}

# íŒŒì¼ ë³µì‚¬ 
docker cp {local file path} {container}:{container file path} # local -> container
docker cp {container}:{container file path} {local file path}  # container -> local

# ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸
docker logs {container}
docker logs -f {container} # Tailing

# ì»¨í…Œì´ë„ˆ ìƒì„±
docker create {image}

# ì»¨í…Œì´ë„ˆ ì´ë¦„(Alias) ë°”ê¾¸ê¸°
docker rename {old_container} {new_container}
```