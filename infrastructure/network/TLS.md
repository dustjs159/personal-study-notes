π’» [Network] SSL/TLS
=====================
# SSL/TLS 
* SSL(Secure Socket Layer) / TLS(Transport Layer Security) : λ°μ΄ν„° "μ „μ†΅"μ‹ λ³΄λ‹¤ μ•μ „ν•κ² λ°μ΄ν„° μ „μ†΅μ„ ν•κΈ° μ„ν• μ•”νΈν™” ν”„λ΅ν† μ½

## SSL(Secure Socket Layer)
* μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°„ μ•μ „ν• λ°μ΄ν„° μ „μ†΅μ„ μ„ν• μ•”νΈν™” ν”„λ΅ν† μ½
* SSL μΈμ¦μ„λ¥Ό ν†µν•΄ μ•μ „ν• λ°μ΄ν„° ν†µμ‹ μ΄ κ°€λ¥
* λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•΄μ„ μ „μ†΅ν•κΈ° μ„ν•΄ λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹κ³Ό κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μ„ νΌν•©ν•΄μ„ μ‚¬μ©

## HTTPS μ—μ„ SSLμ„ μ΄μ©ν• μ•μ „ν• ν†µμ‹  κ³Όμ •
* Handshake : μ‹¤μ  λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›κΈ° μ „ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ νƒμƒ‰ν•λ” κ³Όμ •   

1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ ‘μ†(Client Hello). μ΄ λ• ν΄λΌμ΄μ–ΈνΈκ°€ μ§€μ›ν•λ” μ•”νΈν™” λ°©μ‹ μ „μ†΅ + ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ μƒμ„±ν• λλ¤ λ°μ΄ν„° μ „μ†΅   
2. μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ— μ‘λ‹µ(Server Hello). μ΄ λ• μ„λ²„κ°€ μ§€μ›ν•λ” μ•”νΈν™” λ°©μ‹ μ „μ†΅ + μ„λ²„μΈ΅μ—μ„ μƒμ„±ν• λλ¤ λ°μ΄ν„° μ „μ†΅ + **μ„λ²„μ κ³µκ°ν‚¤κ°€ ν¬ν•¨λ SSL μΈμ¦μ„ μ „μ†΅**   
3. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„κ°€ λ³΄λ‚Έ μΈμ¦μ„κ°€ CA(Certificate Authority, μΈμ¦κΈ°κ΄€)μ—μ„ λ°κΈ‰λ κ²ƒμΈμ§€ ν™•μΈν•κΈ° μ„ν•΄ CA κ³µκ°ν‚¤λ΅ μΈμ¦μ„λ¥Ό λ³µνΈν™”ν•μ—¬ CAμ—μ„ λ°κΈ‰λμ—λ‹¤λ” κ²ƒμ„ μ¦λ… λ° μ„λ²„ μ‹ λΆ°    + ν΄λΌμ΄μ–ΈνΈμΈ΅μ—μ„ μƒμ„±ν• λλ¤ λ°μ΄ν„°μ™€ μ„λ²„μΈ΅μ—μ„ μƒμ„±ν• λλ¤λ°μ΄ν„°λ¥Ό μ΅°ν•©ν•΄μ„ Pre-Master Key(λ‚μ¤‘μ— Session Keyκ°€ λ¨)λ¥Ό μƒμ„±ν•μ—¬ μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™” ν›„ μ „μ†΅    
4. μ„λ²„λ” μΌλ ¨μ κ³Όμ •μ„ κ±°μ³ Pre-Master Keyλ¥Ό Session Keyλ΅ λ³€ν™, νλ“ ν•¨   
5. HandShake μΆ…λ£   

* Session Keyλ΅ λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ„ μ΄μ©ν• λ°μ΄ν„° μ†΅, μμ‹    

**κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μ΄ μ•μ „ν•κ² λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  μ μλ‹¤λ” μ¥μ μ΄ μμ§€λ§ λ¶€ν•κ°€ λ§μ΄ μ†λ¨λλ‹¤λ” λ‹¨μ μ΄ μκΈ° λ•λ¬Έμ— μ‹¤μ  λ°μ΄ν„°λ” λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μΌλ΅ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›λ λ€μΉ­ν‚¤μ— μ‚¬μ©λλ” ν‚¤λ” κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μΌλ΅ λ§λ“¤μ–΄μ„ λ°μ΄ν„° λ…Έμ¶μ„ μµλ€ν• ν”Όν•λ‹¤.**   

* μ—°κ²° μΆ…λ£ :  λ°μ΄ν„° μ†΅, μμ‹  μΆ…λ£ μ‹ μ„λ΅μ—κ² SSLμΆ…λ£λ¥Ό μ•λ¦¬κ³  ν†µμ‹ μ— μ‚¬μ©λ Session KeyνκΈ°
   
<img width="712" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2021-05-15 α„‹α…©α„α…¥α†« 3 42 21" src="https://user-images.githubusercontent.com/57285121/118314774-90a8bd00-b52f-11eb-937a-dc909ccb4085.png">
   
# SSL μΈμ¦μ„   
* **1. ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν• μ„λ²„κ°€ μ‹ λΆ° ν•  μ μλ” μ„λ²„μ„μ„ λ³΄μ¥**   
* **2. μ•μ „ν• λ°μ΄ν„° μ „μ†΅μ„ μ„ν• λ°μ΄ν„° μ•”νΈν™”, λ³µνΈν™” λ©μ μ κ³µκ°ν‚¤λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² μ κ³µ**   

# SSL Offloading
* SSL μΈμ¦μ„ λ°κΈ‰μ„ μ„ν•΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°„ λ¶€ν• λ°μƒ
* μ„λΉ„μ¤λ¥Ό μ κ³µν•΄μ•Όν•λ” μ„λ²„κ°€ μ„λΉ„μ¤ μ κ³µλ³΄λ‹¤ μΈμ¦μ— λ” λ§μ€ λ¶€ν•λ¥Ό μ•κ² λ¨
* μ΄λ¬ν• λ¬Έμ μ μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ Reverse Proxyλ¥Ό μ‚¬μ©ν•μ—¬ SSLμΈμ¦μ„ μ•”νΈν™”, λ³µνΈν™”λ¥Ό λ‹΄λ‹Ήν•κ² ν•¨
   
<img width="833" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2021-05-06 α„‹α…©α„’α…® 4 23 23" src="https://user-images.githubusercontent.com/57285121/117257959-6ac44e00-ae87-11eb-8b51-73147b83a434.png">   
   
* ν΄λΌμ΄μ–ΈνΈμ™€ Reverse Proxyλ” HTTPS ν†µμ‹ μ„ ν•κ³  Reverse Proxyμ™€ μ„λ²„ κ·Έλ£Ήλ“¤μ€ HTTP ν†µμ‹ μ„ ν•¨   
* **Reverse Proxy μ„λ²„μ— SSL κ΄€λ ¨ μ‘μ—…μ„ μ„μ„**
* SSL Termination   
> * μΌλ°μ μΈ SSL μ¤ν”„λ΅λ”©μ κµ¬ν„ λ°©λ²•. ν΄λΌμ΄μ–ΈνΈμ™€ Reverse Proxyλ” SSL μ—°κ²°μ„ ν†µν•΄ μƒμ„±λ μ„Έμ… ν‚¤λ¥Ό λ€μΉ­ν‚¤ λ°©μ‹μΌλ΅ μ•”νΈν™”λ¥Ό ν•μ—¬ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μΌλ©° Reverse Proxyμ™€ μ„λ²„λ“¤μ κ·Έλ£Ήκ°„μ—λ” λ³µνΈν™”λ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μ   
> * Reverse Proxyμ λ¶€ν•λ¥Ό μ¤„μ—¬μ¤μΌλ΅ μ„±λ¥ ν–¥μƒ   
> * Reverse Proxyμ™€ μ„λ²„ κ·Έλ£Ήλ“¤κ°„μ—λ” λ³΄μ•μ„±μ΄ λ–¨μ–΄μ§ μ μλ‹¤λ” λ‹¨μ  μ΅΄μ¬   
* SSL Bridging   
> * Reverse Proxyκ°€ μ„λ²„ κ·Έλ£Ήμ—κ² λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  λ• ν•λ² λ” μ•”νΈν™” κ³Όμ •μ„ κ±°μ³μ„ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” λ°©λ²•   
> * SSL Terminationμ λ³΄μ• μ·¨μ•½μ μ„ κ°μ„ ν•  μ μμΌλ‚ Reverse Proxyλ” μ•”νΈν™” κ³Όμ •μ„ ν•λ² λ” κ±°μ³μ•Ό ν•λ―€λ΅ λ¶€ν• μƒμΉμΌλ΅ μΈν•΄ μ„±λ¥μ΄ λ–¨μ–΄μ§ μλ„ μμ   

# SSL λ²„μ „
1. SSL 1.0   
> * μΌλ°μΈλ“¤μ—κ² κ³µκ°λμ§€ μ•μ•λ λ²„μ „.   
2. SSL 2.0
> * λ„·μ¤μΌ€μ΄ν”„μ‚¬κ°€ 1995λ…„μ— λ°ν‘ν• λ²„μ „.   
> Handshakeκ³Όμ •μ—μ„ λ°©μ–΄μ±…μ΄ μ—†μ–΄ ν”Όν•΄ κ°€λ¥μ„±μ΄ μμ—μ(λ³΄μ• μ·¨μ•½μ )    
3. SSL 3.0   
> * 1996λ…„μ— SSL 2.0μ μ‹¬κ°ν• κ²°ν•¨μ„ ν•΄κ²°ν•κ³  μ¶μ‹ λ λ²„μ „.   
> * λ³΄μ•μ·¨μ•½μ  μ΅΄μ¬ : POODLE(Padding Oracle On Downgraded Legacy Encryption)   

# TLS(Transport Layer Security)
* TLSλ” μ—­μ‹ SSLκ³Ό λ§μ°¬κ°€μ§€λ΅ μ›Ή μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ κ°„ ν†µμ‹ μ„ μ•”νΈν™” ν•λ”λ° μ‚¬μ©λλ” ν”„λ΅ν† μ½.   
* TLSλ” SSL 3.0μ„ κΈ°λ°μΌλ΅ ν•΄μ„ κµ­μ  μΈν„°λ„· ν‘μ¤€ν™” κΈ°κµ¬μΈ IETFκ°€ λ§λ“  ν”„λ΅ν† μ½   
* SSL 3.0μ—μ„ λ³΄μ•μ„± λ° μ•μ •μ„±μ΄ ν–¥μƒμ΄ λ¨   
1. TLS 1.0   
> * SSL 3.0μ λ³΄μ• μ·¨μ•½μ μ„ λ€λ¶€λ¶„ κ°μ„    
> * SSL 3.0μΌλ΅ λ‹¤μ΄κ·Έλ μ΄λ“κ°€ κ°€λ¥ν•λ‹¤λ” λ³΄μ•μ·¨μ•½μ  μ΅΄μ¬   
2. TLS 1.1   
> * μ•”νΈ λΈ”λ΅ μ²΄μΈ κ³µκ²©μ— λ€ν• λ°©μ–΄ μ¶”κ°€   
> * IANA λ“±λ΅ νλΌλ―Έν„° μ§€μ› μ¶”κ°€   
3. TLS 1.2   
> * μ·¨μ•½ν• SHA1 ν•΄μ‹± μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•μ§€ μ•κ³  SHA2λ¥Ό μ‚¬μ©     
4. TLS 1.3   
> * μ„λ²„μ—μ„ μΈμ¦μ„λ¥Ό μ•”νΈν™”ν•μ—¬ μ „λ‹¬ν•λ„λ΅ κ°μ„    
> * κ°•ν™”λ λ³΄μ•(μ•μ „ν•μ§€ μ•μ€ μ•”νΈν™” λ°©μ‹ μ§€μ›X)   
> * μµμ΄ μ—°κ²° μ‹μ— μ•”νΈν™” ν†µμ‹ μ„ κ°μ‹ν•λ” μ μ°¨λ¥Ό κ°„μ†ν™”ν•μ—¬ μ„±λ¥ κ°μ„     

